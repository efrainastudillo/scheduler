CREATE TABLE compartir (comparte_id INT, compartido_id INT, activo TINYINT(1) DEFAULT '1', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(comparte_id, compartido_id)) ENGINE = INNODB;
CREATE TABLE facebook (id BIGINT AUTO_INCREMENT, usuario_id INT NOT NULL, fb_id INT NOT NULL, activo TINYINT(1) DEFAULT '1', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX usuario_id_idx (usuario_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE usuario (id INT UNIQUE AUTO_INCREMENT, identificacion VARCHAR(255) NOT NULL UNIQUE, matricula VARCHAR(255), nombre_usuario VARCHAR(255), contrasenia VARCHAR(50), nombres VARCHAR(255), apellidos VARCHAR(255), correo VARCHAR(255) NOT NULL, correo_alternativo VARCHAR(255), telefono VARCHAR(255), celular VARCHAR(255), direccion VARCHAR(255), pagina_web VARCHAR(255), foto LONGBLOB, cumpleanio DATE, twitter VARCHAR(255), genero VARCHAR(5), admin TINYINT(1) DEFAULT '0', espol TINYINT(1) DEFAULT '0', activo TINYINT(1) DEFAULT '0', eliminado TINYINT(1) DEFAULT '0', created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
ALTER TABLE compartir ADD CONSTRAINT compartir_comparte_id_usuario_id FOREIGN KEY (comparte_id) REFERENCES usuario(id);
ALTER TABLE facebook ADD CONSTRAINT facebook_usuario_id_usuario_id FOREIGN KEY (usuario_id) REFERENCES usuario(id);
